## Часть 1. Установка ОС ##

Установил Ubuntu 20.04 Server LTS без графического интерфейса.

![df01](../src/Screenshots/df01.png)

*рис. 1 Установка ОС*

## Часть 2. Создание пользователя ##

Создал ещё одного пользователя Victoria, отличного от пользователя aleksandr, который создавался при установке.
Пользователя  Victoria добавил в группу adm.

![df02](../src/Screenshots/df02.png)

*рис. 2 Создание пользователя*
  
## Часть 3. Настройка сети ОС ##

Переименовал машину с aleksandr на user-1, установил временную 24 часовую зону, соответствующую текущему местоположению Asia/Novosibirsk,
вывел названия сетевых интерфейсов с помощью консольной команды.

![df03](../src/Screenshots/df03.png)

*рис. 3 Переименование*

На Unix системах интерфейс loopback (lo) - механизм который реализует виртуальный сетевой интерфейс.
Это петлевой интерфейс с IP-адресом 127.0.0.1 обычно используемый для эмуляции передачи данных в пределах данной системы.

Используя консольную команду "hostname -I" получил от DHCP сервера ip адрес устройства, на котором работал.

![df04](../src/Screenshots/df04.png)

*рис. 4 IP*

Dynamic Host Configuration Protocol, DHCP (протокол динамической конфигурации узлов) – это сетевой протокол,
используемый для автоматического получения узлами IP-адресов и сетевой конфигурации с сервера.
IP-адрес, выделенный DHCP-клиенту DHCP-сервером, находится в «аренде», время аренды может отличаться в зависимости от того,
сколько времени клиенту требуется соединение или конфигурация DHCP.

Определил (ip route), вывел на экран внешний IP-адрес шлюза (ip) 10.0.2.2 и внутренний IP-адрес шлюза (gw) 10.0.2.15.

![df05](../src/Screenshots/df05.png)

*рис. 5 Адреса*

Задал статичные настройки ip, gw, dns, использовал публичные DNS серверы: 1.1.1.1 и 8.8.8.8. После перезагрузки виртуальной машины убедился,
что статичные сетевые настройки (ip, gw, dns) соответствуют ранее заданным.

![df06](../src/Screenshots/df06.png)

*рис. 6 Настройки*

Пропинговал удалённые хосты 1.1.1.1 и ya.ru

![df07](../src/Screenshots/df07.png)

*рис. 7 Пинг хоста 1.1.1.1*

![df08](../src/Screenshots/df08.png)

*рис. 8 Пинг хоста ya.ru*

## Часть 4. Обновление ОС ##

Обновил системные пакеты до последнего на момент выполнения задания.

![df09](../src/Screenshots/df09.png)

*рис. 9 Обновление*

## Часть 5. Использование команды sudo ##

**sudo** — это утилита, предоставляющая привилегии суперпользователя (root - он же суперпользователь который имеет
право на выполнение всех операций) для выполнения административных операций в соответствии со своими настройками.
Утилита позволяет легко контролировать доступ к важным приложениям в системе.
Поменял hostname ОС (user-1 на server) от имени пользователя Victoria, созданного ранее (смотри часть 2).

![df10](../src/Screenshots/df10.png)

*рис. 10 Права*

## Часть 6. Установка и настройка службы времени ##

Настроил службу автоматической синхронизации времени (проверил так как это сделал это в части 3 при установке соответствующй часовой зоны).

![df11](../src/Screenshots/df11.png)

*рис. 11 Время*

## Часть 7. Установка и использование текстовых редакторов ##

Установил текстовые редакторы Vi/Vim, Nano, JOE. Создал три текстовых файла: test_VIM.txt, test_NANO.txt, test_JOE.txt.
Содержание каждого файла: мой никнейм.

Для создания файла test_VIM.txt набрал команду vim, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал :w test_VIM.txt.

![df12](../src/Screenshots/df12.png)

*рис. 12 VIM*

Для создания файла test_NANO.txt набрал команду nano, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал CTRL +    O далее в появившейся строке набрал test_NANO.txt. Далее Enter, выход из редактора CTRL +    X.

![df13](../src/Screenshots/df13.png)

*рис. 13 NANO*

Для создания файла test_JOE.txt набрал команду joe, в файл ввёл свой никнейм. Для выхода из редактора и сохранения файла набрал Ctrl + K,
далее Q и Y ввёл название файла test_JOE.txt.

![df14](../src/Screenshots/df14.png)

*рис. 14 JOE*

Открыл файл test_Vim.txt на редактирование (vim test_VIM.txt) отредактировал файл, заменил никнейм на строку "21 School 21",
закрыл файл без сохранения изменений (:q!).

![df15](../src/Screenshots/df15.png)

*рис. 15 VIM*

Открыл файл test_NANO.txt на редактирование (nano test_NANO.txt)) отредактировал файл, заменил никнейм на строку "21 School 21",
закрыл файл без сохранения изменений (CTRL + X, далее N).

![df16](../src/Screenshots/df16.png)

*рис. 16 NANO*

Открыл файл test_JOE.txt на редактирование (joe test_JOE.txt) отредактировал файл, заменил никнейм на строку "21 School 21",
закрыл файл без сохранения изменений (Ctrl + С, далее N).

![df17](../src/Screenshots/df17.png)

*рис. 17 JOE*

Используя редактор Vim добавил в файл слова (отредактировал не сохраняя).
Изучил функцию поиска по содержимому файла (слово целиком).

![df18](../src/Screenshots/df18.png)

*рис. 18 VIM поиск*

Изучил функцию замены объектов в файле, осуществил замену старых_объектов на новые_объекты

![df19](../src/Screenshots/df19.png)

*рис. 19 VIM замена*

Используя редактор Nano добавил в файл слова (отредактировал не сохраняя).
Изучил комбинацию клавиш поиска по содержимому файла (CTRL + ^ + W).

![df20](../src/Screenshots/df20.png)

*рис. 20 NANO поиск*

Изучил комбинация клавиш замены объектов в файле, осуществил замену старых_объектов на новые_объекты
Комбинация клавиш Ctrl + \ далее ввёл строку (что меняем), нажал Enter, далее ввёл строку (на что меняем) нажал Enter,
для замены во всём файле нажал А.

![df21](../src/Screenshots/df21.png)

*рис. 21 NANO замена*

Используя редактор Joe добавил в файл слова (отредактировал не сохраняя).
Изучил комбинацию клавиш поиска по содержимому файла (CTRL + K, далее F), объект поиска,
перемещение по файлу при поиске (CTRL + L).

![df22](../src/Screenshots/df22.png)

*рис. 22 JOE поиск*

Изучил комбинация клавиш замены объектов в файле, осуществил замену старых_объектов на новые_объекты
Комбинация клавиш (CTRL + K, далее F), далее ввёл строку (что меняем), нажал Enter, далее для замены во всём файле нажал R.
Далее ввёл строку (на что меняем), при подстветке объектов замены в тексте нажимал Y.

![df23](../src/Screenshots/df23.png)

*рис. 23 JOE замена*

## Часть 8. Установка и базовая настройка сервиса SSHD ##

* Проверил установлен ли протокол ssh (dpkg -l и ps aux | grep sshd) да протокол был установлен при обновлении системы (смотри часть 4).
* Проверил работу сервера, он должен был добавиться в автозагрузку автоматически проверил (sudo systemctl enable sshd).
* Перенастроил протокол SSHd на порт 2022, отредактировав файл конфигурации (sudo nano /etc/ssh/sshd_config).
* Строку #Port 22 заменил на Port 2022
* Создал новый ключ клиента, (ssh-keygen -t dsa) создал файл, указал пароль для доступа.
* Перезапустил сервер и проверил его корректность работы через открытый и секретный ключ.
* Ввод команды ps предоставит нам информацию о запущенных процессах в текущей оболочке, проверим наличие процесса sshd.

![df24](../src/Screenshots/df24.png)

*рис. 24 SSHD*

Команда ps с флагами:
* -с - отобразит информацию планировщика;
* -f - выведет максимум доступных данных;
* -F - аналогично -f, только выводит ещё больше данных;
* -l - длинный формат вывода;
* -j, (j) - выводит процессы в стиле Jobs, минимум информации;
* -M, (Z) - выведет информацию о безопасности;
* -o, (o) - определяем свой формат вывода;
* --sort, (k) - сортируем по указанной колонке;
* -L, (H)- отобразим потоки процессов в колонках LWP и NLWP;
* -m, (m) - выввод потоки после процесса;
* -V, (V) - вывод информацию о версии;
* -H - вывод дерево процессов;


Команда netstat отображает различную информацию, такую как сетевые подключения, статистику интерфейсов, таблицы маршрутизации, и т.п.
* t информация по протоколам TCP;
* a информация о состояние всех сокетов (портов) прослушиваемых и нет;
* n  информация о сетевых адресах показанных в формате числа;
* 0.0.0.0:* это означает, что подключение может быть выполнено на любой внешний адрес

Ввёл команду netstat -tan.

![df25](../src/Screenshots/df25.png)

*рис. 25 netstat -tan*

* Proto - протокол  TCP или UDP
* Recv-Q - Счётчик байт не скопированных программой пользователя из этого сокета
* Send-Q - Счётчик байтов, не подтверждённых удалённым узлом
* Local Address - IP -адрес локального компьютера и номер используемого порта
* Foreign Address - IP -адрес и номер порта удалённого компьютера, к которому подключен сокет если есть *, значит порт ещё не установлен
* State - указывает состояние TCP - соединения
 
## Часть 9. Установка и использование утилит top, htop ##

Установил и запустил утилиту top
+ uptime 						            	        		 2:47
+ количество авторизованных пользователей 		        		 3
+ общая загрузку системы						              	 0.0
+ общее количество процессов		    			        	 118
+ загрузка cpu
    * процент времени процессора, затраченного на выполнение пользовательских процессов (us) 0.0
    * процент времени процессора, затраченного на выполнение процессов ядра (sy) 0.2
    * процент времени процессора, затраченного на выполнение пользовательских процессов с ограничениями (ni) 0.0
    * процент времени процессора проведённое в режиме ожидания (id) 99.8
    * процент времени процессора потраченное на ожидание на периферийных устройствах (wa) 0.0 
+ загрузка памяти
    * физическая память (Mem)
        * общий объем ОЗУ (total) 1983.1
        * количество свободной памяти (free) 1332.9
        * количество занятой памяти (used) 173.5
        * зарезервированная системой память (buff/cache) 476.8
    * виртуальная память или пространство подкачки (Swap)
        * общий объем ОЗУ (total) 2048.0
        * количество свободной памяти (free) 2048.0
        * количество занятой памяти (used) 0.0
        * память который может быть выделена для процессов, не использую большую область диска (avail Mem) 1655.1
+ pid процесса занимающего больше всего памяти		        	 1
+ pid процесса, занимающего больше всего процессорного времени	 11

![df26](../src/Screenshots/df26.png)

*рис. 26 Утилита top*

Установил и запустил утилиту htop
Отсортировал по PID

![df27](../src/Screenshots/df27.png)

*рис. 27 Утилита htop*

Отсортировал по PERCENT_CPU

![df28](../src/Screenshots/df28.png)

*рис. 28 Сортировка по PERCENT_CPU*

Отсортировал по PERCENT_MEM

![df29](../src/Screenshots/df29.png)

*рис. 29 Сортировка по PERCENT_MEM*

Отсортировал по TIME

![df30](../src/Screenshots/df30.png)

*рис. 30 Сортировка по TIME*

Отфильтровавал по процессу sshd

![df31](../src/Screenshots/df31.png)

*рис. 31 Сортировка по процессу sshd*

Нашёл процессы с syslog

![df32.1](../src/Screenshots/df32.1.png)

*рис. 32 (а) Поиск*

![df32.2](../src/Screenshots/df32.2.png)

*рис. 32 (б) Поиск + Фильтрование*

Вывел процессы с добавлением hostname, clock и uptime

![df33](../src/Screenshots/df33.png)

*рис. 33 Процессы с добавлением hostname, clock и uptime*

## Часть 10. Использование утилиты fdisk ##

Команда fdisk -l вывела информацию о доступных мне дисках и разделах на них 
Описание диска:
* название жёсткого диска sda (sd блочное устройство как правило SCSI, a - найдено первым);
* его размер 30 GiB;
* количество секторов на диске 62914560;
* размер swap 2.0 GiB

![df34](../src/Screenshots/df34.png)

*рис. 34 Утилита fdisk*

## Часть 11. Использование утилиты df ##

Запустил команду df.

Для корневого раздела (/) (/dev/mapper/ubuntu--vg-ubuntu-lv):
* размер раздела 14380040 KiB
* размер занятого пространства 4760392 KiB
* размер свободного пространства 8869468 KiB
* процент использования 35%

![df35](../src/Screenshots/df35.png)

*рис. 35 Утилита df*

Запустил команду df -Th.

Для корневого раздела (/) (/dev/mapper/ubuntu--vg-ubuntu-lv):
* размер раздела 14 GiB
* размер занятого пространства 4.6 GiB
* размер свободного пространства 8.5 GiB
* процент использования 35%

![df36](../src/Screenshots/df36.png)

*рис. 36 Утилита df -Th*

## Часть 12. Использование утилиты du ##

Запустил команду du

Вывел размер содержимого папок home, log (в байтах, в человекочитаемом виде)

![df37](../src/Screenshots/df37.png)

*рис. 37 Содержимое папок home, log*

Вывел размер содержимого папки var (в байтах, в человекочитаемом виде)

![df38](../src/Screenshots/df38.png)

*рис. 38 Содержимое папки var*

Вывел размер содержимого в var/log (не всего, а каждого вложенного элемента, используя *)

![df39](../src/Screenshots/df39.png)

*рис. 39 Содержимого в /var/log**

## Часть 13. Установка и использование утилиты ncdu ##

Установил утилиту ncdu (sudo apt install ncdu).

Вывел размер папки home.

![df40](../src/Screenshots/df40.png)

*рис. 40 Папка home*

Вывел размер папки  var.

![df41](../src/Screenshots/df41.png)

*рис. 41 Папка var*

Вывел размер и содержимое папки  /var/log.

![df42](../src/Screenshots/df42.png)

![df43](../src/Screenshots/df43.png)

*рис. 42 - 43 Папка log*

## Часть 14. Работа с системными журналами ##

В папке log просмотрел файлы: dmesg, syslog, auth.log
* Время последней успешной авторизации - 18:09:08
* Имя пользователя - aleksandr
* Метод входа в систему - для входа использовалось sshd соединение, аутентификации в режиме pam_unix (проверялось действительность пользователя по предоставленному паролю. Информацию о пароле пользователя система ищет в соответствии с алгоритмом, заданным в конфигурационном файле).

![df44](../src/Screenshots/df44.png)

*рис. 44 Данные о пользователе*

Перезапустил службу SSHd. Просмотрел сообщение в логах о рестарте службы.

![df45](../src/Screenshots/df45.png)

*рис. 45 Рестарт службы SSHd*

## Часть 15. Использование планировщика заданий CRON ##

Написал скрипт, в планировщике заданий создал добавил задание с написанным скриптом, (запуск uptime через каждые 2 минуты).
![df46](../src/Screenshots/df46.png)

*рис. 46 Запуск команды uptime*

![df47](../src/Screenshots/df47.png)

*рис. 47 Скрипт*

Список текущих заданий для CRON

![df48](../src/Screenshots/df48.png)

*рис. 48 Список текущих заданий*

Удалил задание из планировщика заданий (изменил файл, другой способ crontab -r).

![df49](../src/Screenshots/df49.png)

*рис. 49 Удаление*

![df50](../src/Screenshots/df50.png)

*рис. 50 Содержимое файла*
